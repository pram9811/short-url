
<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ShortURL - Free</title>
  <link rel="icon" href="https://files.cloudkuimages.guru/images/aqw2OPhM.jpg" type="image/jpeg" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      color: #1f2937;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: black;
      overflow: hidden;
    }

    video.bg-video {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: -1;
    }

    .container {
      background: rgba(255, 255, 255, 0.6);
      backdrop-filter: blur(14px);
      border-radius: 20px;
      padding: 40px;
      max-width: 500px;
      width: 100%;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      text-align: center;
      z-index: 1;
    }

    .logo {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 10px;
      font-size: 2em;
      font-weight: 700;
      color: #3B82F6;
    }

    .logo svg {
      width: 28px;
      height: 28px;
      margin-right: 8px;
    }

    .subtitle {
      font-size: 1em;
      color: #333;
      margin-bottom: 30px;
    }

    .url-input {
      width: 100%;
      padding: 14px 20px;
      font-size: 16px;
      border: 2px solid #ccc;
      border-radius: 12px;
      margin-bottom: 20px;
      background: #f9f9f9;
      color: #111;
    }

    .url-input:focus {
      border-color: #3B82F6;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
    }

    .btn {
      background: #3B82F6;
      color: white;
      border: none;
      padding: 14px;
      border-radius: 12px;
      width: 100%;
      font-weight: 600;
      font-size: 16px;
      cursor: pointer;
    }

    .btn:hover {
      background: #2563EB;
    }

    .loading, .error {
      margin-top: 20px;
      display: none;
    }

    .loading.show, .error.show {
      display: block;
    }

    .spinner {
      width: 20px;
      height: 20px;
      border: 3px solid #ccc;
      border-top: 3px solid #3B82F6;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      display: inline-block;
      vertical-align: middle;
      margin-right: 10px;
    }

    .error {
      background: #ffeaea;
      color: #e74c3c;
      padding: 10px;
      border-radius: 8px;
    }

    .footer {
      margin-top: 30px;
      font-size: 0.85em;
      color: #888;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .popup {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(31, 41, 55, 0.4);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }

    .popup-content {
      background: #fff;
      border-radius: 14px;
      padding: 30px 24px;
      width: 90%;
      max-width: 400px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
      text-align: center;
      animation: bounceIn 0.4s ease;
    }

    .popup-check {
      margin-bottom: 15px;
    }

    .popup-content h2 {
      color: #111827;
      margin-bottom: 6px;
    }

    .popup-content p {
      color: #6b7280;
      font-size: 14px;
      margin-bottom: 16px;
    }

    .popup-url-box {
      background: #f3f4f6;
      border-radius: 8px;
      padding: 12px 14px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 20px;
      font-size: 13px;
      text-align: left;
    }

    .popup-url-text {
      color: #1f2937;
      font-family: monospace;
      word-break: break-all;
      flex: 1;
    }

    .popup-copy-btn {
      background: transparent;
      border: none;
      cursor: pointer;
      padding: 6px;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-left: 8px;
      flex-shrink: 0;
      transition: background-color 0.2s;
    }

    .popup-copy-btn:hover {
      background: #e5e7eb;
    }

    .popup-copy-btn:focus {
      outline: none;
    }

    .popup-copy-btn svg {
      width: 16px;
      height: 16px;
    }

    .popup-actions {
      display: flex;
      justify-content: center;
      gap: 12px;
    }

    .done-btn, .view-btn {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
    }

    .done-btn {
      background: #3B82F6;
      color: white;
    }

    .view-btn {
      background: #e5e7eb;
      color: #111827;
    }

    @keyframes bounceIn {
      0% { transform: scale(0.95); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }
  </style>
</head>
<body>
  <video class="bg-video" autoplay muted loop playsinline>
    <source src="https://files.cloudkuimages.guru/videos/FWjZL7tI.mp4" type="video/mp4">
  </video>

  <div class="container">
    <div class="logo">
      <svg xmlns="http://www.w3.org/2000/svg" fill="#3B82F6" viewBox="0 0 24 24"><path d="M3.9 12a4.1 4.1 0 0 1 4.1-4.1h3v1.5h-3A2.6 2.6 0 0 0 5.4 12a2.6 2.6 0 0 0 2.6 2.6h3v1.5h-3A4.1 4.1 0 0 1 3.9 12Zm5.6.75h5v-1.5h-5v1.5ZM16.5 7.9a4.1 4.1 0 0 1 0 8.2h-3v-1.5h3a2.6 2.6 0 0 0 0-5.2h-3V7.9h3Z"/></svg>
      ShortURL
    </div>
    <div class="subtitle">URL Shortener fast and free</div>

    <form id="urlForm">
      <input type="url" id="urlInput" class="url-input" placeholder="Paste Your URL" required />
      <button type="submit" class="btn" id="submitBtn">Short Your Url</button>
    </form>

    <div class="loading" id="loading">
      <span class="spinner"></span> Wait...
    </div>

    <div class="error" id="error"></div>
  </div>

  <div id="popupResult" class="popup">
    <div class="popup-content">
      <div class="popup-check">
        <svg xmlns="http://www.w3.org/2000/svg" fill="#10b981" viewBox="0 0 24 24" width="48" height="48">
          <path d="M9 16.17l-3.88-3.88-1.42 1.41L9 19 20.3 7.71l-1.42-1.41z"/>
        </svg>
      </div>
      <h2>Upload Successful!</h2>
      <p>Your URL has been shortened.</p>
      <div class="popup-url-box">
        <div class="popup-url-text">
          <strong id="fileName">shorturl</strong><br>
          <span id="popupShortUrl">https://short.url/abc123</span>
        </div>
        <button id="popupCopyBtn" class="popup-copy-btn" title="Salin">
          <svg id="copyIcon" xmlns="http://www.w3.org/2000/svg" fill="#6b7280" viewBox="0 0 24 24">
            <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
          </svg>
        </button>
      </div>
      <div class="popup-actions">
        <button class="done-btn" onclick="closePopup()">Done</button>
        <button class="view-btn" onclick="window.open(document.getElementById('popupShortUrl').textContent)">View</button>
      </div>
    </div>
  </div>

  <script>
    const urlForm = document.getElementById('urlForm')
    const urlInput = document.getElementById('urlInput')
    const submitBtn = document.getElementById('submitBtn')
    const loading = document.getElementById('loading')
    const error = document.getElementById('error')
    const popup = document.getElementById('popupResult')
    const popupShortUrl = document.getElementById('popupShortUrl')
    const fileName = document.getElementById('fileName')
    const copyBtn = document.getElementById('popupCopyBtn')
    const audio = new Audio("https://files.cloudkuimages.guru/audios/inObCckP.mp3")
    let hasPlayed = false
    document.body.addEventListener('click', () => {
      if (!hasPlayed) {
        audio.play().catch(() => {})
        hasPlayed = true
      }
    }, { once: true })

    urlForm.addEventListener('submit', async (e) => {
      e.preventDefault()
      const url = urlInput.value.trim()
      if (!url) return
      loading.classList.add('show')
      error.classList.remove('show')
      submitBtn.disabled = true
      try {
        const res = await fetch('/api/shorten', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ url })
        })
        const data = await res.json()
        if (!res.ok) throw new Error(data.error || 'Terjadi kesalahan')
        popupShortUrl.textContent = data.shortUrl
        fileName.textContent = data.name || 'shorturl'
        popup.style.display = 'flex'
        urlForm.reset()
      } catch (err) {
        error.textContent = err.message
        error.classList.add('show')
      } finally {
        loading.classList.remove('show')
        submitBtn.disabled = false
      }
    })

    function closePopup() {
      popup.style.display = 'none'
    }

    copyBtn.addEventListener('click', async () => {
      const text = popupShortUrl.textContent
      try {
        await navigator.clipboard.writeText(text)
        document.getElementById('copyIcon').outerHTML = `<svg xmlns="http://www.w3.org/2000/svg" fill="#10b981" viewBox="0 0 24 24"><path d="M9 16.17l-3.88-3.88-1.42 1.41L9 19 20.3 7.71l-1.42-1.41z"/></svg>`
        setTimeout(() => {
          document.getElementById('popupCopyBtn').innerHTML = `<svg id="copyIcon" xmlns="http://www.w3.org/2000/svg" fill="#6b7280" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>`
        }, 2000)
      } catch (err) {}
    })
  </script>
</body>
                              </html>
